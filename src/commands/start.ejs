---
description: Not sure where to start? This command helps you find the right workflow.
---

# Start: Find Your Workflow

<%- include('partials/user-comms-contract') %>

<%- include('partials/visual-vocabulary', { context: 'start' }) %>

Parse `[ARGUMENTS]` to determine which mode to enter.

- **If `[ARGUMENTS]` is empty or whitespace** -- enter Mode 1 (Bare Invocation).
- **If `[ARGUMENTS]` contains any text** -- enter Mode 2 (Input Classification).

---

## Mode 1 -- Bare Invocation

The user typed `/reaper:start` with no arguments. They need guidance on which workflow to use.

### Render the Runway Card

Use the Runway Card from the Visual Vocabulary above to greet the user. This is the welcome mat.

### Present Workflow Options

After the Runway Card, present three options using AskUserQuestion. Each option maps to a downstream command. The descriptions are educational -- they tell the user what each workflow does and when to pick it.

```json
{
  "questions": [{
    "question": "What are you working on?",
    "header": "Pick a Workflow",
    "options": [
      {
        "label": "I have a design question",
        "description": "Assembles domain experts to explore architecture, trade-offs, and competing approaches before you commit to a direction."
      },
      {
        "label": "I have a feature to plan",
        "description": "Breaks your feature into parallel work units with dependencies mapped. Creates issues ready for autonomous execution."
      },
      {
        "label": "I have a task to build",
        "description": "Give it a task ID or description and walk away. Writes code test-first through mandatory quality gates."
      }
    ],
    "multiSelect": false
  }]
}
```

### Handle Selection

Map the user's choice to a downstream command and invoke it. The downstream command will prompt the user for details.

| Selection | Action |
|-----------|--------|
| "I have a design question" | `Skill("reaper:squadron")` |
| "I have a feature to plan" | `Skill("reaper:flight-plan")` |
| "I have a task to build" | `Skill("reaper:takeoff")` |
| Other (freeform text) | Treat as input -- fall through to Mode 2 using the freeform text as `[ARGUMENTS]` |

Invoke the Skill with no arguments. The downstream command will ask the user for its own input.

---

## Mode 2 -- Input Classification

The user typed `/reaper:start <input>`. Classify the input and recommend the best workflow, but always let the user override.

### Step 1: Classify Input

Apply these heuristic rules in order. Stop at the first match.

**Rule 1 -- Task ID pattern detected: recommend takeoff**

<!-- user-comms: describe detection as "looks like a task ID" — do not expose regex patterns or rule numbers in user output -->
Match any of these patterns in the input:
- `PROJ-123` (uppercase letters, dash, digits)
- `repo-a3f` (lowercase letters, dash, alphanumeric short hash)
- `#456` (hash followed by digits)

These three patterns are sufficient and unambiguous. Do not apply broader regex matching -- hyphenated English words like "real-time" or "trade-off" are not task IDs.

If a task ID pattern is found anywhere in the input, classify as **takeoff**.

**Rule 2 -- Design keywords detected (and no task ID): recommend squadron**

Check whether the input contains any of these keywords or phrases (case-insensitive):
- architecture
- design
- decision
- migrate
- strategy
- trade-off (or tradeoff)
- "should we"
- compare

If one or more design keywords match AND Rule 1 did not match, classify as **squadron**.

**Rule 3 -- Everything else: recommend flight-plan**

If neither Rule 1 nor Rule 2 matched, classify as **flight-plan**.

### Step 2: Render the Input Analysis Card

Use the Input Analysis Card from the Visual Vocabulary above. Populate it with:
- The user's input
- The detected classification
- The recommended workflow

### Step 3: Present Options with Recommendation

Present all three workflows using AskUserQuestion. The recommended option appears first and is marked "(Recommended)". Option descriptions explain WHY each workflow fits (or does not fit) the input -- this is how the user learns which workflow to pick in the future.

**If classified as takeoff:**

```json
{
  "questions": [{
    "question": "How would you like to proceed?",
    "header": "Input Analysis",
    "options": [
      {
        "label": "takeoff (Recommended)",
        "description": "This looks like a task ID or a specific piece of work. Takeoff will fetch the task details, set up a worktree, and execute it autonomously with quality gates."
      },
      {
        "label": "flight-plan",
        "description": "Choose this if the input describes a larger feature that should be decomposed into multiple tasks before execution."
      },
      {
        "label": "squadron",
        "description": "Choose this if you need to explore design trade-offs and get expert opinions before committing to a direction."
      }
    ],
    "multiSelect": false
  }]
}
```

**If classified as squadron:**

```json
{
  "questions": [{
    "question": "How would you like to proceed?",
    "header": "Input Analysis",
    "options": [
      {
        "label": "squadron (Recommended)",
        "description": "This sounds like a design question. Squadron assembles domain experts to debate trade-offs and produce a technical brief before you commit to a direction."
      },
      {
        "label": "flight-plan",
        "description": "Choose this if you already know the direction and want to decompose it into executable work units."
      },
      {
        "label": "takeoff",
        "description": "Choose this if the work is already scoped and ready to build -- no planning or design exploration needed."
      }
    ],
    "multiSelect": false
  }]
}
```

**If classified as flight-plan:**

```json
{
  "questions": [{
    "question": "How would you like to proceed?",
    "header": "Input Analysis",
    "options": [
      {
        "label": "flight-plan (Recommended)",
        "description": "This looks like a feature that needs decomposition. Flight-plan will break it into parallel work units, map dependencies, and create issues for autonomous execution."
      },
      {
        "label": "takeoff",
        "description": "Choose this if the work is small enough to execute directly without planning -- a single task, not a multi-step feature."
      },
      {
        "label": "squadron",
        "description": "Choose this if you are unsure about the technical approach and want expert debate before committing to a plan."
      }
    ],
    "multiSelect": false
  }]
}
```

### Step 4: Handle Selection

Map the user's choice to a downstream command. Pass the original user input as arguments so the downstream command has context.

<!-- user-comms: do not surface skill routing or platform detection details to the user — just invoke the selected workflow -->
| Selection | Action |
|-----------|--------|
| "takeoff (Recommended)" or "takeoff" | `Skill("reaper:takeoff", args="[original-user-input]")` |
| "flight-plan (Recommended)" or "flight-plan" | `Skill("reaper:flight-plan", args="[original-user-input]")` |
| "squadron (Recommended)" or "squadron" | `Skill("reaper:squadron", args="[original-user-input]")` |
| Other (freeform text) | Combine freeform text with original input, re-classify, and present options again |

Replace `[original-user-input]` with the exact text from `[ARGUMENTS]`.

---

## Scope Boundary

This is a routing command. Classify and delegate only. Never execute downstream logic -- that belongs to squadron, flight-plan, and takeoff respectively.
